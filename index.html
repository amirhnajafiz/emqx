<!DOCTYPE html>
<html>
<head>
  <title>
    Instagram Access Token Retrieval
  </title>
</head>
<body>
  <div>
    <h3>
      Access your Instagram account by entring your token:
    </h3>

    <label for="token">Token: </label>
    <input id="token" type="text" placeholder="****" />
    
    <br /><br />

    <button onclick="pull()">Fetch</button>

    <br />
    <hr />
    <br />

    <div>
      <h4>
        Profile
      </h4>
      <div id="profile">

      </div>
    </div>

    <div>
      <h4>
        Posts
      </h4>
      <div id="posts">

      </div>
    </div>

    <div>
      <h4>
        Stories
      </h4>
      <div id="stories">

      </div>
    </div>

    <div>
      <h4>
        Followers
      </h4>
      <div id="followers">

      </div>
    </div>

  </div>

  <script src="./api/followers.js"></script>
  <script src="./api/posts.js"></script>
  <script src="./api/profile.js"></script>
  <script src="./api/stories.js"></script>
  <script>
    function pull() {
      const accessToken = document.getElementById("token").value;

      localStorage.setItem("token", accessToken);
      
      getProfileInfo(accessToken);
      getFollowers(accessToken);
      getPosts(accessToken);
      getStories(accessToken);
    }

    window.onload = function (_) {
      let value = localStorage.getItem("token");
      if (value == undefined || value.length > 0) {
        document.getElementById("token").value = value;
      }
    }
  </script>
</body>
</html>
